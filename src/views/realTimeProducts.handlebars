<h1>Lista de Productos en Tiempo Real</h1>

<ul id='productsList'>
  {{#each products}}
    <li data-id='{{this._id}}'>
      {{this.title}}
      - ${{this.price}}
    </li>
  {{/each}}
</ul>

<hr />

<h2>Agregar Producto</h2>
<form id='addProductForm'>
  <input type='text' name='title' placeholder='Título' required />
  <input type='text' name='description' placeholder='Descripción' required />
  <input type='text' name='code' placeholder='Código' required />
  <input type='number' name='price' placeholder='Precio' required />
  <input type='number' name='stock' placeholder='Stock' required />
  <input type='text' name='category' placeholder='Categoría' required />
  <button type='submit'>Crear</button>
</form>

<hr />

<h2>Eliminar Producto</h2>
<form id='deleteProductForm'>
  <input type='text' name='id' placeholder='ID del producto' required />
  <button type='submit'>Eliminar</button>
</form>

<script src='/socket.io/socket.io.js'></script>
<script>
  const socket = io(); const addForm =
  document.getElementById('addProductForm'); addForm.addEventListener('submit',
  (e) => { e.preventDefault(); const formData = new FormData(addForm); const
  product = Object.fromEntries(formData.entries()); product.price =
  parseFloat(product.price); product.stock = parseInt(product.stock);
  product.status = true; product.thumbnails = []; socket.emit('createProduct',
  product); addForm.reset(); }); const deleteForm =
  document.getElementById('deleteProductForm');
  deleteForm.addEventListener('submit', (e) => { e.preventDefault(); const pid =
  deleteForm.elements['id'].value; socket.emit('deleteProduct', pid);
  deleteForm.reset(); }); socket.on('productAdded', (product) => { const list =
  document.getElementById('productsList'); const li =
  document.createElement('li'); li.dataset.id = product._id; li.textContent =
  `${product.title} - $${product.price}`; list.appendChild(li); });
  socket.on('productDeleted', (pid) => { const item =
  document.querySelector(`li[data-id="${pid}"]`); if (item) item.remove(); });
</script>